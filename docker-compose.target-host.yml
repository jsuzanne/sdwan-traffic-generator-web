# SD-WAN Traffic Generator - Target Site Host Mode Configuration
# This is a slimmed-down configuration for site-to-site convergence testing.

services:
  # Voice/Convergence Echo Server
  sdwan-voice-echo:
    image: jsuzanne/sdwan-voice-echo:stable
    container_name: sdwan-voice-echo
    network_mode: "host"
    cap_add:
      - NET_ADMIN
      - NET_RAW
    environment:
      - DEBUG=false
      - TARGET_HTTP_PORT=8082
      - SLOW_DELAY_SECONDS=5
      - LOOP_SLOW_SECONDS=60
      - LOOP_NORMAL_SECONDS=60
      - RANDOM_SLOW_PROBABILITY=0.5
      - EICAR_FILE_PATH=/opt/sdwan-target/eicar.com.txt
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
